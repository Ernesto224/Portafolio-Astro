---
import TechIcon from "./TechIcon.astro";
import type { TechCarruselProps } from "../../types/types.ts";

const { technologies = [] } = Astro.props as TechCarruselProps;
const reverse = Astro.props.reverse as boolean | undefined;
const delay = Astro.props.delay as string | undefined;
---

<div class="relative overflow-hidden h-full py-4">
  <!-- Gradientes de fade -->
  <span
    class="absolute left-0 w-16 h-[100%] bg-linear-to-r from-fondo-profundo via-fondo-profundo/50 to-transparent z-20"
    aria-hidden="true"></span>
  <span
    class="absolute right-0 w-16 h-[100%] bg-linear-to-l from-fondo-profundo via-fondo-profundo/50 to-transparent z-30"
    aria-hidden="true"></span>

  <!-- Contenedor de scroll -->
  <div class="overflow-hidden h-full">
    <ul
      class="scrolling-techs"
      style=`${reverse
        ? "--start: -50%; --end: 0%;"
        : "--start: 0%; --end: -50%;"} --delay: ${delay}ms;`
      aria-label="Tecnologías"
    >
      <!-- Primer set de tecnologías -->
      {
        technologies.map((tech) => (
          <li>
            <TechIcon icon={tech.icon} label={tech.label} />
          </li>
        ))
      }

      <!-- Duplicado para scroll infinito -->
      {
        technologies.map((tech) => (
          <li aria-hidden="true">
            <TechIcon icon={tech.icon} label={tech.label} />
          </li>
        ))
      }
    </ul>
  </div>
</div>

<style>
  /* Animación de scroll infinito */
  @keyframes scrollInfinite {
    from {
      transform: translateX(var(--start));
    }
    to {
      transform: translateX(var(--end));
    }
  }

  .scrolling-techs {
    display: flex;
    gap: 2rem;
    width: fit-content;
    animation: scrollInfinite 40s linear infinite;
    animation-delay: var(--delay, 0s);
    list-style: none;
    margin: 0;
    padding: 0;
  }

  .scrolling-techs li {
    flex-shrink: 0;
  }
</style>
